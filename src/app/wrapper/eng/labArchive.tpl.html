<div class="table-responsive" adrr-grid="adrrGridOptions"></div>

<adrr-filters adrr-id="search" adrr-title="Search" adrr-filters-def="filtersDef" filters="filters"></adrr-filters>

<div class="modal" id="commentModal" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title" id="myModalLabel">Comments</h4>
            </div>
            <div class="modal-body">
                <div class="container">
                    <div class="col-xs-6">
                        <table class="table table-striped">
                            <tr>
                                <td>
                                    <b>Date</b>
                                </td>

                                <td>
                                    : {{curRec.date}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>User</b>
                                </td>

                                <td>
                                    : {{curRec.user_id | fetchValue:yii['User']:'username'}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>Shift</b>
                                </td>

                                <td>
                                    : {{curRec.shift_id | fetchValue:yii['ShiftType']}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>Supplier</b>
                                </td>

                                <td>
                                    : {{curRec.supplier_id | fetchValue:yii['Supplier']}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>Concrete</b>
                                </td>

                                <td>
                                    : {{curRec.conc_type_id | fetchValue:yii['ConcreteType']}}
                                </td>
                            </tr>

                            <tr ng-class="{'danger': curRec.red !== null && curRec.red.indexOf('temp') > -1}">
                                <td>
                                    <b>Temp</b>
                                </td>

                                <td>
                                    : {{curRec.temp}}
                                </td>
                            </tr>

                            <tr ng-class="{'danger': curRec.red !== null && curRec.red.indexOf('slump') > -1, 'warning': curRec.red === null && curRec.yellow !== null && curRec.yellow.indexOf('slump') > -1}">
                                <td>
                                    <b>Slump</b>
                                </td>

                                <td>
                                    : {{curRec.slump}}
                                </td>
                            </tr>

                            <tr ng-class="{'danger': curRec.red !== null && curRec.red.indexOf('flow') > -1, 'warning': curRec.red === null && curRec.yellow !== null && curRec.yellow.indexOf('flow') > -1}">
                                <td>
                                    <b>Flow</b>
                                </td>

                                <td>
                                    : {{curRec.flow}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>Plant</b>
                                </td>

                                <td>
                                    : {{curRec.plant}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>Truck</b>
                                </td>

                                <td>
                                    : {{curRec.truck}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>Truck Load</b>
                                </td>

                                <td>
                                    : {{curRec.truck_load}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>Ticket</b>
                                </td>

                                <td>
                                    : {{yii["Supplier"]["list"][curRec.supplier_id].prefix + curRec.ticket}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>Dept Time</b>
                                </td>

                                <td>
                                    : {{curRec.dept_time | stringDate:'HH:mm'}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>Arrival Time</b>
                                </td>

                                <td>
                                    : {{curRec.arriv_time | stringDate:'HH:mm'}}
                                </td>
                            </tr>

                            <tr>
                                <td>
                                    <b>Accepted</b>
                                </td>

                                <td>
                                    : {{curRec.accepted | yesNo}}
                                </td>
                            </tr>
                        </table>
                    </div>

                    <div class="col-xs-6">
                        <div class="panel panel-default" ng-repeat="(i, comment) in comments">
                            <div class="panel-heading" ng-class="{'right': i % 2 !== 0}">
                                {{comment.user_id |
                                fetchValue:yii['User']:'username'}}<span>{{comment.date_time}}</span>
                            </div>

                            <div class="panel-body">
                                {{comment.comment}}
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>